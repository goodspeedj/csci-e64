<!DOCTYPE html>
<html>
  <head>
    <title>Line Graph with D3</title>
    <link rel="stylesheet" type="text/css" href="svg4.css"/>
    <script src="http://d3js.org/d3.v3.min.js"></script>
  </head>
  <body>

    <textarea id="tsv">
      date    close
      1-May-12  582.13
      30-Apr-12 583.98
      27-Apr-12 603.00
      26-Apr-12 607.70
      25-Apr-12 610.00
      24-Apr-12 560.28
      23-Apr-12 571.70
      20-Apr-12 572.98
      19-Apr-12 587.44
      18-Apr-12 608.34
      17-Apr-12 609.70
      16-Apr-12 580.13
      13-Apr-12 605.23
      12-Apr-12 622.77
      11-Apr-12 626.20
      10-Apr-12 628.44
      9-Apr-12  636.23
      5-Apr-12  633.68
      4-Apr-12  624.31
      3-Apr-12  629.32
      2-Apr-12  618.63
    </textarea>

    <textarea id="json">
      [
          { 
            "OPEN": "26.28",
            "DATE": "02/26/2013",
            "VOLUME": "443842" 
          },

          { 
            "OPEN": "26.70",
            "DATE": "02/27/2013",
            "VOLUME": "343179"
          },
          {
            "OPEN": "27.20",
            "DATE": "02/28/2013",
            "VOLUME": "262821"
          },
          {
            "OPEN": "26.90",
            "DATE": "03/01/2013",
            "VOLUME": "297274"
          },
          {
            "OPEN": "27.47",
            "DATE": "03/04/2013",
            "VOLUME": "321933"
          },
          {
            "OPEN": "27.38",
            "DATE": "03/05/2013",
            "VOLUME": "278871"
          },
          {
            "OPEN": "27.60",
            "DATE": "03/06/2013",
            "VOLUME": "309123"
          },
          {
            "OPEN": "28.53",
            "DATE": "03/07/2013",
            "VOLUME": "425037"
          },
          {
            "OPEN": "28.33",
            "DATE": "03/08/2013",
            "VOLUME": "359761"
          },
          {
            "OPEN": "28.16",
            "DATE": "03/11/2013",
            "VOLUME": "155354"
          }
      ]
    </textarea>

    <script type="text/javascript">
        var data = [3, 6, 2, 7, 5, 2, 1, 3, 8, 9, 2, 5, 7];

        //var data_json = document.getElementById("json").value;
        //var json      = JSON.parse(data_json);
        //var tsv_data = document.getElementById("tsv").value;
        var margin = { top: 20, right: 20, bottom: 30, left: 50 };
        var width  = 960 - margin.left - margin.right;
        var height = 500 - margin.top - margin.bottom;

        var x = d3.scale.linear().domain([0, data.length]).range([0, width]);
        var y = d3.scale.linear().domain([0, 10]).range([height, 0]);

        var line = d3.svg.line()
            .x(function(d,i) {
                return x(i);
            })
            .y(function(d) {
                return y(d);
            })

            var chart = d3.select("#chart").append("svg")
                .attr("width", width)
                .attr("height", height)
              .append("svg")
                .attr("transform", "translate(" + margin[3] + "," + margin[0] + ")");

            var xAxis = d3.svg.axis()
                .scale(x)
                .orient("bottom")

            var yAxis = d3.svg.axis()
                .scale(y)
                .orient("left");

            chart.append("svg")
                .attr("class", "x axis")
                .attr("transform", "translate(-25, 0)")
                .call(yAxis);

            chart.append("svg").attr("d", line(data));

        /*

        var parseDate = d3.time.format("%m/%d/%Y").parse;

        var x = d3.time.scale()
            .range([0, width]);

        var y = d3.scale.linear()
            .range([height, 0]);

        var xAxis = d3.svg.axis()
            .scale(x)
            .orient("bottom");

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left");

        var line = d3.svg.line()
            .x(function(d) { return x(d.DATE); })
            .y(function(d) { return y(d.OPEN); });




        var svg = d3.select("body").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");


        d3.tsv(tsv_data, function(error, data) {
          data.forEach(function(d) {
            d.date = parseDate(d.date);
            d.close = +d.close;
          });

          x.domain(d3.extent(data, function(d) { return d.date; }));
          y.domain(d3.extent(data, function(d) { return d.close; }));

          svg.append("g")
              .attr("class", "x axis")
              .attr("transform", "translate(0," + height + ")")
              .call(xAxis);

          svg.append("g")
              .attr("class", "y axis")
              .call(yAxis)
            .append("text")
              .attr("transform", "rotate(-90)")
              .attr("y", 6)
              .attr("dy", ".71em")
              .style("text-anchor", "end")
              .text("Price ($)");

          svg.append("path")
              .datum(data)
              .attr("class", "line")
              .attr("d", line);
        });

        */
    </script>
  </body>
</html>